#!/usr/bin/env bash
set -euo pipefail

cmd="${1:-}"
case "$cmd" in
  list)
    cat <<'OUT'
       VMID STATUS     LOCK         NAME
        201 running                 mocklxc201
        202 running                 mocklxc202
OUT
    ;;
  exec)
    vmid="${2:-}"
    shift 2 || true
    if [ "${1:-}" = "--" ]; then
      shift || true
    fi
    case "$vmid" in
      201)
        echo "10.0.20.21"
        ;;
      202)
        echo "10.0.20.22"
        ;;
      *)
        exit 0
        ;;
    esac
    ;;
  *)
    exit 0
    ;;
esac
